{"version":3,"file":"siyavulaqt.min.js","sources":["../src/siyavulaqt.js"],"sourcesContent":["define([\"jquery\", \"core/ajax\"], function ($, Ajax) {\n  return {\n    init: function (chktrue, chkfalse, questionId) {\n      window.setInterval(function () {\n        const $incorrect = $(\".feedback--incorrect\").length;\n        const $correct = $(\".feedback--correct\").length;\n        const $partiallyCorrect = $(\".feedback--partly-correct\").length;\n\n        if ($incorrect) {\n          $(\"[id='\" + chkfalse.id + \"']\").prop(\"checked\", \"checked\");\n        } else if ($correct || $partiallyCorrect) {\n          $(\"[id='\" + chktrue.id + \"']\").prop(\"checked\", \"checked\");\n        }\n      }, 1000);\n\n      $(\"form\").on(\"submit\", function (e) {\n\n        window.siyavulaActivities = window.siyavulaActivities || {};\n\n        const containerID = e.target.querySelector('[id*=\"siyavula-activity-\"]')?.id;\n        if (!containerID) {\n            return;\n        }\n\n        const uniqueid = `#${containerID}`;\n        const standalone = window.siyavulaActivities[uniqueid];\n\n        const activityId = standalone.currentActivity.id;\n        const responseId = standalone.currentActivity.response.id;\n\n        var submitresponse = Ajax.call([\n          {\n            methodname: \"filter_siyavula_save_activity_data\",\n            args: {\n              questionid: questionId,\n              activityid: activityId,\n              responseid: responseId,\n            },\n          },\n        ]);\n\n        submitresponse[0]\n          .done(function (response) {\n            console.log(response);\n          })\n          .fail(function (ex) {\n            console.log(ex);\n          });\n      });\n    },\n  };\n});\n"],"names":["define","$","Ajax","init","chktrue","chkfalse","questionId","window","setInterval","$incorrect","length","$correct","$partiallyCorrect","id","prop","on","e","siyavulaActivities","containerID","target","querySelector","_e$target$querySelect","uniqueid","standalone","activityId","currentActivity","responseId","response","call","methodname","args","questionid","activityid","responseid","done","console","log","fail","ex"],"mappings":"AAAAA,qCAAO,CAAC,SAAU,aAAc,SAAUC,EAAGC,YACpC,CACLC,KAAM,SAAUC,QAASC,SAAUC,YACjCC,OAAOC,YAAY,iBACXC,WAAaR,EAAE,wBAAwBS,OACvCC,SAAWV,EAAE,sBAAsBS,OACnCE,kBAAoBX,EAAE,6BAA6BS,OAErDD,WACFR,EAAE,QAAUI,SAASQ,GAAK,MAAMC,KAAK,UAAW,YACvCH,UAAYC,oBACrBX,EAAE,QAAUG,QAAQS,GAAK,MAAMC,KAAK,UAAW,YAEhD,KAEHb,EAAE,QAAQc,GAAG,SAAU,SAAUC,6BAE/BT,OAAOU,mBAAqBV,OAAOU,oBAAsB,SAEnDC,0CAAcF,EAAEG,OAAOC,cAAc,sEAAvBC,sBAAsDR,OACrEK,yBAICI,oBAAeJ,aACfK,WAAahB,OAAOU,mBAAmBK,UAEvCE,WAAaD,WAAWE,gBAAgBZ,GACxCa,WAAaH,WAAWE,gBAAgBE,SAASd,GAElCX,KAAK0B,KAAK,CAC7B,CACEC,WAAY,qCACZC,KAAM,CACJC,WAAYzB,WACZ0B,WAAYR,WACZS,WAAYP,eAKH,GACZQ,KAAK,SAAUP,UACdQ,QAAQC,IAAIT,YAEbU,KAAK,SAAUC,IACdH,QAAQC,IAAIE,SAKvB"}